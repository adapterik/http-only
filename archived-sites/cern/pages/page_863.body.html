<div data-element="archive-body">
  <h1>Browser architecure changes</h1>
  See also: <a name="2" href="/archive/cern/763" original-href="BrowserOverview.html" archive-page-id="763">new architecture</a>.
  <p>
    We would like to tidy up the architecture at this point (Oct 91),
    in order to get as much common code as possible between the browsers.
    This will mean
  </p>
  <ul>
    <li>Taking the objective-C form of the NeXT browser and translating into
      C for total portability :-(
    </li>
    <li>Specifying a common interface to a hypertext object,which any parser
      can use. We then aim to have a set of protocol/parser modules which
      we can put into each browser. In some cases (news, wais), the protocol
      module will have to contain the parser, in others (file, http) they
      will be separate.
    </li>
  </ul>
  The web and anchors is be managed by an anchor object basically like
  Anchor.m in the NeXT version, translated into C.
  <p>
    The hypertext object, whose implementation will be different for each
    browser, will be functionally similar to the HyperText object in the
    NeXT browser, but will have the parsing routines removed.</p>
  <p>
    It is the design of the basic X application, and the design of this
    hypertext object, which will mainly concern your group. It would be
    best if the object allowed editing of the text as well as display,
    so that the application will be a browser/editor, like on the next.
    In order to be able to regenerate the SGML, the object must be aware
    of nested regions of the text, and associated styles.  The operations
    which are used be a parser to build a hypertext are basicallycreate
    hypertext</p>
  <p>
    set editable(boolean)</p>
  <p>
    set title (char* title)</p>
  <p>
    start anchor (void* anchor_id)</p>
  <p>
    end anchor</p>
  <p>
    start style(style* style)</p>
  <p>
    end style</p>
  <p>
    append text(char * text)</p>
  <p>
    flush hypertext to screenThe hypertext object will not need to be
    aware of the anchor data structure. The application will be responsible
    for ensuing that any mouse or keyboard events are passed on to the
    hypertext. The hypertext will allow editing (if the document is writable),
    and if an anchor is selected, will call the protocol module to jump
    through that anchor.</p>
  <p>
    Notice that the set of operations above could equally well be interpreted
    by an SGML generator module. An edited hypertext object should also
    be able to dump itself, by reproducing a set of calls to these operations
    on a protocol module which will generate SGML  (etc).</p>
  <p>
    We want to introduce the format negociation part of the protocol too,
    but that will not affect the hypertext object, it will only be in
    the protocol layer.</p>
  <p>
    _________________________________________________________________
  </p>
  <address>
    <a name="0" href="/archive/cern/1868" original-href="http://info.cern.ch./hypertext/TBL_Disclaimer.html" archive-page-id="1868">Tim BL</a>
  </address>
</div>