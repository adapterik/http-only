<!DOCTYPE html>
<html lang="en">
  <head>
    <%= include_partial "head" %>
  </head>
  <body class="http-only-site">
    <%= include_partial "header" %>
    <div class="body">
      <table  class="layout-table" cellspacing="0">
        <tr>
          <td class="content-area">

            <% if @context[:articles].length == 0 %>
            <div  class="alert warning">
              <p>No news isn't good news</p>
              <p>But, seriously, there are no news items on the site yet.</p>
            </div>
            <% end %>

            <% if @context[:articles].length > 0 %>
            <div class="article">
              <div class="article-title"><%= @context[:article]['title'] %></div>
              <div class="article-created"><%= Time.at(@context[:article]['created']).strftime('%Y-%m-%d at %H:%M') %></div>
              <div class="article-body">
                <%= Kramdown::Document.new(article['content']).to_html %>
              </div>
            </div>
            <% end %>

          </td>
          <td class="side-bar">
             <ul class="side-bar-menu-list">
              <li><a href="/home">Home</a></li>
              <li>
                <a href="/edit/<%= @context[:content_id] %>?return_path=<%= @context[:path] %>">
                    Edit this <%= @context[:content_type]['noun'] %>
                </a>
              </li>
              <li>
                <a 
                  href="/delete/<%= @context[:content_id] %>?return_path_success=/home/<%= @context[:content_type]['id'] %>s&return_path_cancel=<%= @context[:path] %>">
                  Delete this <%= @context[:content_type]['noun'] %>
                </a>
              </li>
            </ul>
            <hr>
            <div class="side-bar-section-header">More Articles</div>
            <ul class="side-bar-article-list">
              <% @context[:articles].each do |article| %>
                  <li>
                    <div class="article-title">
                      <a class="nav-link" href="/news/<%= article['id'] %>"><%= article['title'] %></a>
                    </div>
                  
                    <div class="article-created">
                      <%= Time.at(article['created']).strftime('%Y-%m-%d at %H:%M') %>
                    </div>

                    <div class="article-abstract">
                      <%= article['abstract'] %>
                    </div>
                  </li>
                <% end %>
            </ul>

          </td>
        </tr>
      </table>
      
    </div>
    <%= include_partial "footer" %>
  </body>
</html>